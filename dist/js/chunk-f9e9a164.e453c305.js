(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f9e9a164"],{"1bb8":function(e,t,i){"use strict";i("242d")},"242d":function(e,t,i){},"5b0b":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"editPreview"}},[a("header-component"),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{id:"loadingPreview"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.onload,expression:"onload"}],attrs:{id:"editpagePreview"}},[a("div",{ref:"previewHeight",attrs:{id:"questionnairePreview"},on:{scroll:e.scrollDefault}},[a("div",{class:[e.scrollable?"queBox-remain":"queBox"],attrs:{id:"topBox"}},[e._v(" 预览 ")]),a("div",{class:[e.scrollable?"queBox-remain":"queBox"],attrs:{id:"queBoxPreview"}},[a("div",{attrs:{id:"headPreview"}},[a("div",{attrs:{id:"namePreview"}},[a("span",[e._v(e._s(e.queName))])]),a("div",{attrs:{id:"interpretationPreview"}},[a("span",[e._v(" "+e._s(e.queIntp)+" ")])])]),a("div",{ref:"models",attrs:{id:"modelsPreview"}},e._l(e.quesFiltered,(function(t){return a("div",{key:t.id,staticClass:"list-complete-item"},[a("div",{staticClass:"que-title-holder"},[a("div",{staticClass:"redStarHolder"},[t.compulsory?a("img",{attrs:{src:i("e0d9"),alt:"*",width:"7px",height:"7px"}}):a("div",{staticStyle:{width:"7px",height:"7px"}})]),a("div",{staticClass:"queIndex"},[a("div",[e._v(e._s(e.queUltimateIndex(t.id)+1)+".")])]),a("span",{class:""!=t.titleImgSrc?"lengthened":"span-origin"},[e._v(e._s(t.title))]),a("div",{staticClass:"pic-holder"},[a("div",{staticClass:"label-file label-title"},[""!=t.titleImgSrc?a("el-image",{staticStyle:{width:"135px",height:"90px","border-radius":"5px"},attrs:{src:t.titleImgSrc,"preview-src-list":[t.titleImgSrc],fit:"cover"}}):e._e()],1)])]),"单选题"==t.type?a("div",e._l(t.radio.choices,(function(s){return a("div",{key:s.id,staticClass:"choices-item"},[a("li",[a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.radio.value,expression:"que.radio.value"}],staticClass:"choiceBox",attrs:{type:"radio",id:""+t.id+s.fileId},domProps:{value:""===s.blank_fill?s.content:s.content+"|ST23|"+s.blank_fill,checked:s.checked,checked:e._q(t.radio.value,""===s.blank_fill?s.content:s.content+"|ST23|"+s.blank_fill)},on:{change:function(i){return e.$set(t.radio,"value",""===s.blank_fill?s.content:s.content+"|ST23|"+s.blank_fill)}}})]),a("label",{attrs:{for:""+t.id+s.fileId}},[e._v(" "+e._s(s.content)+" ")])]),e.chosen(t.radio.value,s.content)&&s.needFilling?a("div",{staticClass:"bfa-input",style:s.imgSrc?"margin-bottom: 5px;":""},[a("div",{staticClass:"redStarHolder"},[s.compulsory?a("img",{attrs:{src:i("e0d9"),alt:"*",width:"7px",height:"7px"}}):a("div",{staticStyle:{width:"7px",height:"0px"}})]),a("input",{directives:[{name:"model",rawName:"v-model",value:s.blank_fill,expression:"choice.blank_fill"},{name:"focus",rawName:"v-focus"}],attrs:{type:"text"},domProps:{value:s.blank_fill},on:{input:function(t){t.target.composing||e.$set(s,"blank_fill",t.target.value)}}})]):e._e(),a("div",{staticClass:"pic-preview"},[""!=s.imgSrc?a("el-image",{staticStyle:{width:"135px",height:"90px","border-radius":"5px"},attrs:{src:s.imgSrc,"preview-src-list":[s.imgSrc],fit:"cover"}}):e._e()],1)])})),0):"多选题"==t.type?a("div",e._l(t.multiple.options,(function(s){return a("div",{key:s.id,staticClass:"options-item"},[a("li",[a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.multiple.value,expression:"que.multiple.value"}],staticClass:"choiceBox",attrs:{type:"checkbox",id:""+t.id+s.fileId},domProps:{value:""===s.blank_fill?s.content:s.content+"|ST23|"+s.blank_fill,checked:Array.isArray(t.multiple.value)?e._i(t.multiple.value,""===s.blank_fill?s.content:s.content+"|ST23|"+s.blank_fill)>-1:t.multiple.value},on:{change:function(i){var a=t.multiple.value,r=i.target,l=!!r.checked;if(Array.isArray(a)){var n=""===s.blank_fill?s.content:s.content+"|ST23|"+s.blank_fill,o=e._i(a,n);r.checked?o<0&&e.$set(t.multiple,"value",a.concat([n])):o>-1&&e.$set(t.multiple,"value",a.slice(0,o).concat(a.slice(o+1)))}else e.$set(t.multiple,"value",l)}}})]),a("label",{attrs:{for:""+t.id+s.fileId}},[e._v(e._s(s.content))])]),e.chosen(t.multiple.value,s.content)&&s.needFilling?a("div",{staticClass:"bfa-input",style:s.imgSrc?"margin-bottom: 5px;":""},[a("div",{staticClass:"redStarHolder"},[s.compulsory?a("img",{attrs:{src:i("e0d9"),alt:"*",width:"7px",height:"7px"}}):a("div",{staticStyle:{width:"7px",height:"0px"}})]),a("input",{directives:[{name:"model",rawName:"v-model",value:s.blank_fill,expression:"option.blank_fill"},{name:"focus",rawName:"v-focus"}],attrs:{type:"text"},domProps:{value:s.blank_fill},on:{input:function(t){t.target.composing||e.$set(s,"blank_fill",t.target.value)}}})]):e._e(),a("div",{staticClass:"pic-preview"},[""!=s.imgSrc?a("el-image",{staticStyle:{width:"135px",height:"90px","border-radius":"5px"},attrs:{src:s.imgSrc,"preview-src-list":[s.imgSrc],fit:"cover"}}):e._e()],1)])})),0):"填空题"==t.type?a("div",[a("div",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.blank_fill,expression:"que.blank_fill"}],staticClass:"blank",attrs:{type:"text",placeholder:"文本框"},domProps:{value:t.blank_fill},on:{input:function(i){i.target.composing||e.$set(t,"blank_fill",i.target.value)}}})])]):"排序题"==t.type?a("div",e._l(t.sort.sortItems,(function(i){return a("div",{key:i.id,staticClass:"sortItems-item"},[a("li",[a("div",[a("div",{class:["orderBox",i.order?"orderBox-active":""],on:{click:function(a){return e.sortHandler(t.sort,i)}}},[e._v(" "+e._s(i.order?i.order:"")+" ")])]),a("span",[e._v(" "+e._s(i.content)+" ")])]),a("div",{staticClass:"pic-preview"},[""!=i.imgSrc?a("el-image",{staticStyle:{width:"135px",height:"90px","border-radius":"5px"},attrs:{src:i.imgSrc,"preview-src-list":[i.imgSrc],fit:"cover"}}):e._e()],1)])})),0):"评分题"==t.type?a("div",[a("div",[a("div",{staticClass:"slider"},[a("el-slider",{attrs:{marks:t.slider.marks,min:t.slider.min,max:t.slider.max,step:t.slider.max-t.slider.min>10?.1:.01,"show-tooltip":t.slider.showToolTip},on:{change:function(e){t.slider.showToolTip=!0}},model:{value:t.slider.value,callback:function(i){e.$set(t.slider,"value",i)},expression:"que.slider.value"}})],1)])]):"矩阵单选题"==t.type?a("div",[a("div",{staticClass:"matrix-holder"},[a("div",{staticClass:"header-preview"},[a("div",{staticClass:"empty"}),a("div",{staticClass:"columnTitles"},e._l(t.matrixRadio.columnVals,(function(t,i){return a("div",{key:i},[a("span",[e._v(e._s(t.content))])])})),0)]),e._l(t.matrixRadio.rowVals,(function(i,s){return a("div",{key:s,staticClass:"row-item"},[a("div",{staticClass:"row-item-title"},[e._v(e._s(i.content))]),a("div",{staticClass:"row-item-choices"},e._l(t.matrixRadio.columnVals,(function(t,s){return a("div",{key:s,staticClass:"row-item-choice"},[a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:i.value,expression:"row.value"}],attrs:{type:"radio"},domProps:{value:t.content,checked:e._q(i.value,t.content)},on:{change:function(a){return e.$set(i,"value",t.content)}}})])])})),0)])}))],2)]):a("div",[a("div",{staticClass:"matrix-holder"},[a("div",{staticClass:"header-preview"},[a("div",{staticClass:"empty"}),a("div",{staticClass:"columnTitles"},e._l(t.matrixMultiple.columnVals,(function(t,i){return a("div",{key:i},[a("span",[e._v(e._s(t.content))])])})),0)]),e._l(t.matrixMultiple.rowVals,(function(i,s){return a("div",{key:s,staticClass:"row-item"},[a("div",{staticClass:"row-item-title"},[e._v(e._s(i.content))]),a("div",{staticClass:"row-item-choices"},e._l(t.matrixMultiple.columnVals,(function(t){return a("div",{key:t.id,staticClass:"row-item-choice"},[a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:i.value,expression:"row.value"}],attrs:{type:"checkbox"},domProps:{value:t.content,checked:Array.isArray(i.value)?e._i(i.value,t.content)>-1:i.value},on:{change:function(a){var s=i.value,r=a.target,l=!!r.checked;if(Array.isArray(s)){var n=t.content,o=e._i(s,n);r.checked?o<0&&e.$set(i,"value",s.concat([n])):o>-1&&e.$set(i,"value",s.slice(0,o).concat(s.slice(o+1)))}else e.$set(i,"value",l)}}})])])})),0)])}))],2)])])})),0),a("div",{attrs:{id:"page"}},[a("button",{class:[1===e.currentPage?"disabled":"avaliable"],attrs:{type:"button",disabled:1===e.currentPage},on:{click:function(t){e.currentPage--}}},[e._v(" 上一页 ")]),e._v(" "+e._s(e.currentPage)+"/"+e._s(e.totalPage)+"页 "),a("button",{class:[e.currentPage===e.totalPage?"disabled":"avaliable"],attrs:{type:"button",disabled:e.currentPage===e.totalPage},on:{click:function(t){e.currentPage++}}},[e._v(" 下一页 ")])])])]),a("div",{attrs:{id:"generalButtsPreview"}},[e._m(0),e._m(1),e._m(2),a("div",{on:{click:e.toEdit}},[a("img",{attrs:{src:i("8308"),width:"18px",height:"18px"}}),a("span",[e._v("返回")])])])])])],1)},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("img",{attrs:{src:i("86ac"),width:"25px",height:"25px"}}),a("span",[e._v("设置")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("img",{attrs:{src:i("fe36"),width:"23px",height:"23px"}}),a("span",[e._v("保存")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("img",{attrs:{src:i("33e4"),width:"21px",height:"21px"}}),a("span",[e._v("发布")])])}],r=(i("4de4"),i("d81d"),i("b0c0"),i("ac1f"),i("1276"),i("5530")),l=i("f983"),n=i("eec4"),o=i.n(n),c=i("2f62"),d={name:"Preview",components:{HeaderComponent:l["a"]},data:function(){return{onload:!1,loading:!0,currentPage:1,scrollable:!1,ques:[]}},directives:{focus:{inserted:function(e){e.focus()}}},mounted:function(){var e=this,t=o()();t.listenTo(this.$refs.previewHeight,(function(t){t.scrollHeight>t.clientHeight?e.scrollable=!0:e.scrollable=!1})),this.ques=this.getQues(),setTimeout((function(){e.onload=!0,e.loading=!1}),500)},computed:Object(r["a"])(Object(r["a"])({},Object(c["b"])(["questionnaireObj"])),{},{queName:function(){return this.questionnaireObj.name},queIntp:function(){return this.questionnaireObj.interpretation},totalPage:function(){return this.questionnaireObj.totalPage},quesReceived:function(){return this.questionnaireObj.data},quesUltimate:function(){return this.ques.filter((function(e){return"pagingLine"!==e.type}))},quesFiltered:function(){var e=this;return this.quesUltimate.filter((function(t){return t.page===e.currentPage}))}}),methods:{getQues:function(){var e=this;if(0==this.quesReceived)return this.$message.warning("无可预览内容！"),this.$router.push({name:"HomePage"}),[];var t=JSON.parse(JSON.stringify(this.quesReceived)),i=1;return t.map((function(t){t.page=i,"pagingLine"===t.type&&i++,t.random&&("单选题"===t.type?e.randomize(t.radio.choices):"多选题"===t.type?e.randomize(t.multiple.options):"排序题"===t.type?e.randomize(t.sort.sortItems):"矩阵单选题"===t.type?e.randomize(t.matrixRadio.columnVals):"矩阵多选题"===t.type&&e.randomize(t.matrixMultiple.columnVals))})),t},queUltimateIndex:function(e){var t=-1;return this.quesUltimate.map((function(i,a){i.id===e&&(t=a)})),t},chosen:function(e,t){return"string"===typeof e?e.split("|ST23|")[0]===t:(e.map((function(e){e.split("|ST23|")[0]===t&&(i=!0)})),i);var i},randomize:function(e){e.sort((function(){return Math.random()-.5}))},sortHandler:function(e,t){if(e.sortedNum)if(t.order)if(t.order==e.sortedNum)t.order=0,e.sortedNum--;else{var i=t.order;e.sortItems.map((function(e){e.order>i&&e.order--})),t.order=0,e.sortedNum--}else t.order=++e.sortedNum;else t.order=++e.sortedNum},scrollDefault:function(){this.ques.map((function(e){"评分题"===e.type&&(e.slider.showToolTip=!1)}))},toEdit:function(){this.$router.push({name:"EditPage"})}}},u=d,v=(i("1bb8"),i("a2a2"),i("2877")),m=Object(v["a"])(u,a,s,!1,null,"795057ba",null);t["default"]=m.exports},6574:function(e,t,i){},a2a2:function(e,t,i){"use strict";i("6574")}}]);
//# sourceMappingURL=chunk-f9e9a164.e453c305.js.map